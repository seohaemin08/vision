import streamlit as st
import random
import time

st.set_page_config(page_title="ë§ì¶¤ ë©”ë‰´ ì¶”ì²œ ì•± + ë£°ë ›", page_icon="ğŸ¡")

st.title("ğŸ¡ ë£°ë ›ìœ¼ë¡œ ëŒë¦¬ëŠ” ë§ì¶¤ ë©”ë‰´ ì¶”ì²œ ì•±")
st.write("ê³„ì ˆ, ë‚ ì”¨, ê¸°ë¶„ì— ë§ëŠ” ë©”ë‰´ë¥¼ ì¶”ì²œí•˜ê³ , ëœë¤ ì¶”ì²œì€ ë£°ë ›ì²˜ëŸ¼ ëŒë ¤ ë³´ì—¬ë“œë ¤ìš”!")

# ì˜µì…˜ë“¤
seasons = ["ë´„", "ì—¬ë¦„", "ê°€ì„", "ê²¨ìš¸"]
weather_types = ["ë§‘ìŒ", "ë¹„", "íë¦¼", "ë”ì›€", "ì¶”ì›€"]
moods = ["í–‰ë³µ", "ìš°ìš¸", "í”¼ê³¤", "ìŠ¤íŠ¸ë ˆìŠ¤"]

menu_dict = {
    "ë´„": ["ë¹„ë¹”ë°¥", "ìƒëŸ¬ë“œ", "ì‘¥êµ­"],
    "ì—¬ë¦„": ["ëƒ‰ë©´", "ì½©êµ­ìˆ˜", "ë¹™ìˆ˜"],
    "ê°€ì„": ["ëœì¥ì°Œê°œ", "ì¹¼êµ­ìˆ˜", "ê³ ë“±ì–´êµ¬ì´"],
    "ê²¨ìš¸": ["ìˆœë‘ë¶€ì°Œê°œ", "ì§¬ë½•", "ì„¤ë íƒ•"],
    "ë§‘ìŒ": ["ìƒŒë“œìœ„ì¹˜", "ìƒëŸ¬ë“œ", "ìŠ¤í…Œì´í¬"],
    "ë¹„": ["íŒŒì „", "ì¹¼êµ­ìˆ˜", "ìš°ë™"],
    "íë¦¼": ["ì§¬ë½•", "ìˆ˜ì œë¹„", "ê¹€ì¹˜ì°Œê°œ"],
    "ë”ì›€": ["ë©”ë°€ì†Œë°”", "ëƒ‰ë©´", "ë¹™ìˆ˜"],
    "ì¶”ì›€": ["ê³°íƒ•", "ìˆœëŒ€êµ­ë°¥", "ìœ¡ê°œì¥"],
    "í–‰ë³µ": ["ì¹˜í‚¨", "í”¼ì", "ìŠ¤íŒŒê²Œí‹°"],
    "ìš°ìš¸": ["ì´ˆì½œë¦¿ì¼€ì´í¬", "ì•„ì´ìŠ¤í¬ë¦¼", "ë–¡ë³¶ì´"],
    "í”¼ê³¤": ["ì‚¼ê³„íƒ•", "ë‚™ì§€ë³¶ìŒ", "ê³°íƒ•"],
    "ìŠ¤íŠ¸ë ˆìŠ¤": ["ë§¤ìš´ë‹­ë°œ", "ë¶ˆì¡±ë°œ", "ë§ˆë¼íƒ•"],
}

# ì„ íƒ UI
season = st.selectbox("ê³„ì ˆì„ ì„ íƒí•´ ì£¼ì„¸ìš”:", ["(ì„ íƒ ì•ˆ í•¨)"] + seasons)
weather = st.selectbox("ë‚ ì”¨ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”:", ["(ì„ íƒ ì•ˆ í•¨)"] + weather_types)
mood = st.selectbox("ê¸°ë¶„ì„ ì„ íƒí•´ ì£¼ì„¸ìš”:", ["(ì„ íƒ ì•ˆ í•¨)"] + moods)

def roulette_spin(candidates, spins=20, delay=0.1):
    placeholder = st.empty()
    for _ in range(spins):
        choice = random.choice(candidates)
        placeholder.markdown(f"### ğŸ² ë£°ë › ì¤‘... **{choice}**")
        time.sleep(delay)
    placeholder.markdown(f"### ğŸ‰ ìµœì¢… ì¶”ì²œ ë©”ë‰´: **{choice}**")
    return choice

if st.button("ë©”ë‰´ ì¶”ì²œ"):
    candidates = []
    if season != "(ì„ íƒ ì•ˆ í•¨)":
        candidates += menu_dict.get(season, [])
    if weather != "(ì„ íƒ ì•ˆ í•¨)":
        candidates += menu_dict.get(weather, [])
    if mood != "(ì„ íƒ ì•ˆ í•¨)":
        candidates += menu_dict.get(mood, [])

    if not candidates:
        # ì „ì²´ ë©”ë‰´ ì¤‘ ëœë¤ ì„ íƒ
        candidates = sum(menu_dict.values(), [])

    roulette_spin(candidates)
    
st.markdown(
    "---\n"
    "ğŸ’¡ ì¡°ê±´ì„ ì„ íƒí•˜ì§€ ì•Šìœ¼ë©´ ì „ì²´ ë©”ë‰´ì—ì„œ ëœë¤ìœ¼ë¡œ ë£°ë ›ì´ ëŒì•„ê°‘ë‹ˆë‹¤."
)
